# Deploy Django Template - Comandi disponibili con Just
# Per visualizzare tutti i comandi: just --list o just

# Configura shell per Linux/macOS
set shell := ["bash", "-cu"]

# Variabili globali
python := "uv run"
django_manage := "uv run src/manage.py"

default:
    just help-unix

help-unix:
    shell: bash
    echo -e '\033[35mğŸš€ GESTIONE PRATICHE & PARERI - COMANDI DISPONIBILI\033[0m'
    echo -e '\033[90m============================================================\033[0m'
    echo
    echo -e '\033[32mğŸ“Š DJANGO & DATABASE:\033[0m'
    echo -e '  just run-server         ğŸš€ Server di sviluppo Django'
    echo -e '  just run-dev            ğŸ”§ Server sviluppo (DEV)'
    echo -e '  just run-test           ğŸ§ª Server sviluppo (TEST)'
    echo -e '  just run-staging        ğŸ­ Server sviluppo (STAGING)'
    echo -e '  just run-prod           âš¡ Server sviluppo (PROD)'
    echo -e '  just migrate            ğŸ“¦ Migrazioni database'
    echo -e '  just makemigrations     ğŸ“ Crea migrazioni'
    echo -e '  just shell              ğŸš Shell Django'
    echo -e '  just test               ğŸ§ª Esegue test progetto'
    echo -e '  just test-dev           ğŸ”§ Test ambiente DEV'
    echo -e '  just test-test          ğŸ§ª Test ambiente TEST'
    echo -e '  just test-staging       ğŸ­ Test ambiente STAGING'
    echo -e '  just test-prod          âš¡ Test ambiente PROD'
    echo
    echo -e '\033[36mğŸŒ SERVER & DEPLOY:\033[0m'
    echo -e '  just waitress           ğŸªŸ Server Waitress (Windows)'
    echo -e '  just run-uvicorn        âš¡ Server Uvicorn ASGI'
    echo -e '  just deploy             ğŸ¯ Deploy automatico'
    echo -e '  just deploy-dev         ğŸ”§ Deploy development'
    echo -e '  just deploy-staging     ğŸ§ª Deploy staging'
    echo -e '  just deploy-prod        ğŸš€ Deploy production'
    echo -e '  just stop-servers       ğŸ›‘ Ferma tutti i server'
    echo -e '  just kill-port          ğŸ”ª Termina processo porta 8000'
    echo
    echo -e '\033[33mğŸ”§ QUALITY & FORMAT:\033[0m'
    echo -e '  just fix-all            â­ CORREZIONE GLOBALE completa'
    echo -e '  just lint-codacy        ğŸ” Controlli qualitÃ  Codacy'
    echo -e '  just add-docstrings     ğŸ“ Aggiunge docstring mancanti'
    echo -e '  just precommit-corporate ğŸ¢ Pre-commit aziendale'
    echo -e '  just quality-corporate  ğŸ¢ Quality controlli alternativi'
    echo -e '  just fix-markdown       ğŸ“ Corregge problemi Markdown'
    echo
    echo -e '\033[37mâ„¹ï¸  UTILITY:\033[0m'
    echo -e '  just stats              ğŸ“Š Statistiche progetto'
    echo -e '  just check-env          ğŸ” Controllo ambiente'
    echo -e '  just check-env-dev      ï¿½ Controllo ambiente DEV'
    echo -e '  just check-env-test     ğŸ§ª Controllo ambiente TEST'
    echo -e '  just check-env-staging  ğŸ­ Controllo ambiente STAGING'
    echo -e '  just check-env-prod     âš¡ Controllo ambiente PROD'
    echo -e '  just generate-secret-key ğŸ”‘ Genera Django SECRET_KEY'
    echo -e '  just generate-secret-keys-all ğŸ” Genera SECRET_KEY per tutti e 4 gli ambienti'
    echo -e '  just generate-db-passwords ğŸ” Genera password PostgreSQL sicure'
    echo -e '  just create-db-script   ğŸ—„ï¸ Crea script SQL con password reali'
    echo -e '  just --list             ğŸ“‹ Lista completa comandi'
    echo
    echo -e '\033[35mğŸ¢ INTRANET AZIENDALE:\033[0m'
    echo -e '  just setup-iis          ğŸŒ Configura IIS per intranet'
    echo -e '  just deploy-intranet    ğŸš€ Deploy completo intranet'
    echo
    echo -e '\033[34mğŸªŸ WINDOWS IIS DEPLOYMENT:\033[0m'
    echo -e '  just setup-iis-prod     ğŸŒ Setup IIS produzione'
    echo -e '  just deploy-iis         ğŸš€ Deploy completo con IIS'
    echo -e '  just deploy-iis         ğŸš€ Deploy completo con IIS'
    echo
    echo -e '\033[34mğŸ§ LINUX/macOS NGINX:\033[0m'
    echo -e '  just setup-nginx        ğŸŒ Configura Nginx reverse proxy'
    echo -e '  just deploy-nginx       ğŸš€ Deploy completo con Nginx'
